<h1><%= @recipe.name %></h1>
<h3>Rating: <%= @rate_average %> </h3>
<h2>By <%= link_to @user.name, user_path(@user.id) %></h2>

<p>
  Prep time: <%= @recipe.prep_time %> <%= @recipe.prep_time_unit %>
</p>

<p>
  Cooking time: <%= @recipe.cooking_time %> <%= @recipe.cooking_time_unit %>
</p>

<p>
  Difficulty: <%= @recipe.difficulty %>/10
</p>

<p>
  Course: <%= @recipe.course %>
</p>

<p>
  Serving: <%= @recipe.serving %>
</p>

<% if @recipe.country.present? %>
<p>
  Country of Origin: <%= @recipe.country.name %>
</p>
<% end %>

<% if @recipe.image.present? %>
  <%= cl_image_tag @recipe.image %>
<% end %>

<p>
  Main recipe: <%= @recipe.content %>
</p>

<% if @current_user == @recipe.user %>
  <p>
    <%= button_to "Edit", edit_recipe_path, :method => 'get' %>
  </p>
<% end %>

<% if @current_user.present? %>
  <% if @current_user == @recipe.user || @current_user.admin? %>
    <p>
      <%= button_to "Delete", @recipe, :method => 'delete', data: { confirm: "Are you sure?" } %>
    </p>
  <% end %>
<% end %>

<h3>Comments</h3>
<% @recipe.comments.each do |comment| %>
  <p>
    <strong>Commenter:</strong>
    <%= comment.user.email%>
  </p>

  <p>
    <strong>Comment:</strong>
    <%= comment.content %>
  </p>

  <% if @current_user.present? %>
    <% if @current_user == comment.user || @current_user.admin? %>
      <%= button_to "Delete comment", comment, :method => 'delete' %>
    <% end %>
  <% end %>
<% end %>

<% if @current_user.present? %>
  <h3>Add a comment: </h3>
  <%= form_with model: [@recipe, @recipe.comments.build] do |form| %>
    <p>
      <%= form.text_area :content %>
    </p>
    <p>
      <%= form.submit %>
    </p>
  <% end %>
<% end %>

<h2>Other dishes from the same cuisine</h2>
<% @same_country_recipes.each do |recipe| %>
<p class='thumbnail'><%= link_to cl_image_tag(recipe.image), recipe_path(recipe) %></p>
<% end %>

<% if @recipe.course.present? %>
  <h2>Other <%= @recipe.course %> dishes</h2>
  <% @same_course_recipes.each do |recipe| %>
  <p class='thumbnail'><%= link_to cl_image_tag(recipe.image), recipe_path(recipe) %></p>
  <% end %>
<% end %>
